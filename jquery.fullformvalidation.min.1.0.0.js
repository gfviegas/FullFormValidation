(function($,window,undefined){function Plugin(e,t){this._element=e;this._Id=$(e).attr("id");var n={FormName:this._Id,ColorErro:"#FF0000"};var r={Default:"default message!",Erro:{Required:"required field!",Cpf:"invalid CPF",Cnpj:"invalid CNPJ",Email:"invalid email",Date:"invalid date",Num:" invalid value, allowed only numbers!"}};$.extend(true,n,t);this._message=r;this._options=t;this._defaults=defaults;this._name=pluginName;this._settings=n;this._methods=methods;this.init()}var methods={InitField:function(e,t){t.conf=e._methods.getConf(e,t);t.position=e._methods.getPosition(t);var n=t.prop("type");switch(n.toLowerCase()){case"text":if(t.conf.max){$(t).attr("maxlength",t.conf.max)}if(t.conf.type.toLowerCase()=="number"){t.keydown(function(e){if(e.keyCode>=96&&e.keyCode<=105||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=8&&e.keyCode<=46||e.keyCode>=112&&e.keyCode<=123){return true}return false}).keyup(function(e){$(this).val($(this).val().replace(/\s/g,""))})}break;case"radio":break;case"checkbox":break;case"textarea":if(t.conf.max){$(t).attr("maxlength",t.conf.max)}e._methods.SetLimitCharacter(e,t);break;case"password":if(t.conf.max){$(t).attr("maxlength",t.conf.max)}break;case"file":break;case"select-one":break;case"select-multiple":break;default:break}},ValidField:function(e,t){t.conf=e._methods.getConf(e,t);t.position=e._methods.getPosition(t);var n=t.prop("type");if(t.conf){if(t.conf.req){switch(n.toLowerCase()){case"text":if(t.val()==""){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}if(t.conf.type!=""){e._methods.ValidType(e,t)}break;case"radio":if(!t.prop("checked")){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false}break;case"checkbox":if(!t.prop("checked")){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false}break;case"textarea":if(t.val()==""){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"password":if(t.val()==""){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"file":var r=t.conf.filetype.replace(/,/g,"|");var i=new RegExp("(?:"+r+")$");if(!t.val().match(i)){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"select-one":if(t.val()==""){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"select-multiple":var s=t.val();if(s==null||s==""){e._methods.ShowMsg(e,t,e._message.Erro.Required,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break}}}},ShowMsg:function(e,t,n,r){if(t){n=n?n:e._message.Default;var i=e._methods.CreateId(4);var s='<div id="'+i+'" class="'+e._defaults.classBoxError+'">'+n+"</div>";t.before(s);t.data("rel",i);t.attr("data-rel",i);var o=t.position;var u=t.css("border-color");t.css({"border-color":r});$("#"+i).css({top:o.topplus-3+"px",left:o.left-20+"px",color:r}).slideDown(400);var a=t.prop("type");if(a=="text"||a=="password"||a=="textarea"){t.on("keypress",function(){$(this).css({"border-color":u});e._methods.CleanMsg(e,$(this).data("rel"))})}else{t.on("change",function(){$(this).css({"border-color":u});e._methods.CleanMsg(e,$(this).data("rel"))})}}},CleanMsg:function(e,t){if(t){$("#"+t).remove()}else{$("."+e._defaults.classBoxError).remove()}},CreateId:function(e){e=e?e:1;var t=Math.ceil(Math.random()*Math.pow(10,e));var n=Math.ceil(Math.log(t));while(n>10){n=Math.ceil(Math.log(n))}var r=t+"-"+n;return r},ValidType:function(e,t){switch(t.conf.type.toLowerCase()){case"cpf":var n=t.val();var r=n.replace(/[^\d]+/g,"");if(r==""){e._methods.ShowMsg(e,t,e._message.Erro.Cpf,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}if(r.length!=11||r=="00000000000"||r=="11111111111"||r=="22222222222"||r=="33333333333"||r=="44444444444"||r=="55555555555"||r=="66666666666"||r=="77777777777"||r=="88888888888"||r=="99999999999"){e._methods.ShowMsg(e,t,e._message.Erro.Cpf,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}var s=0;for(i=0;i<9;i++)s+=parseInt(r.charAt(i))*(10-i);var o=11-s%11;if(o==10||o==11)o=0;if(o!=parseInt(r.charAt(9))){e._methods.ShowMsg(e,t,e._message.Erro.Cpf,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}var s=0;for(i=0;i<10;i++)s+=parseInt(r.charAt(i))*(11-i);o=11-s%11;if(o==10||o==11)o=0;if(o!=parseInt(r.charAt(10))){e._methods.ShowMsg(e,t,e._message.Erro.Cpf,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"cnpj":var n=t.val();var u=n.replace(/[^\d]+/g,"");if(u==""){e._methods.ShowMsg(e,t,e._message.Erro.Cnpj,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}if(u.length!=14)return false;if(u=="00000000000000"||u=="11111111111111"||u=="22222222222222"||u=="33333333333333"||u=="44444444444444"||u=="55555555555555"||u=="66666666666666"||u=="77777777777777"||u=="88888888888888"||u=="99999999999999"){e._methods.ShowMsg(e,t,e._message.Erro.Cnpj,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}var a=u.length-2;var f=u.substring(0,a);var l=u.substring(a);var c=0;var h=a-7;for(i=a;i>=1;i--){c+=f.charAt(a-i)*h--;if(h<2)h=9}var p=c%11<2?0:11-c%11;if(p!=l.charAt(0)){e._methods.ShowMsg(e,t,e._message.Erro.Cnpj,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}a=a+1;f=u.substring(0,a);c=0;h=a-7;for(i=a;i>=1;i--){c+=f.charAt(a-i)*h--;if(h<2)h=9}p=c%11<2?0:11-c%11;if(p!=l.charAt(1)){e._methods.ShowMsg(e,t,e._message.Erro.Cnpj,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"date":var n=t.val();var d=new Array;var v=new RegExp("(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/[0-9]{2,4}");d=n.split("/");erro=false;if(n.search(v)==-1){erro=true}else if((d[1]==4||d[1]==6||d[1]==9||d[1]==11)&&d[0]>30){erro=true}else if(d[1]==2){if(d[0]>28&&d[2]%4!=0){erro=true}if(d[0]>29&&d[2]%4==0){erro=true}}if(erro){e._methods.ShowMsg(e,t,e._message.Erro.Date,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"number":var n=t.val();var m=new RegExp("^[+-]?(d+([.,]d+)?)+$");if(isNaN(n)){e._methods.ShowMsg(e,t,e._message.Erro.Num,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break;case"mail":var n=t.val();var g=new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/);if(typeof n=="string"){if(!g.test(n)){e._methods.ShowMsg(e,t,e._message.Erro.Email,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}}else if(typeof n=="object"){if(!g.test(n.value)){e._methods.ShowMsg(e,t,e._message.Erro.Email,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}}else{e._methods.ShowMsg(e,t,e._message.Erro.Email,e._settings.ColorErro);t.focus();e._defaults.Success=false;return false}break}},SetLimitCharacter:function(e,t){if(e._defaults.character.Active||t.conf.characterative){var n=e._methods.CreateId(3);var r=t.conf.maxtext?t.conf.maxtext:e._defaults.character.MaxText;var i=t.conf.max?t.conf.max:e._defaults.character.Max;var s='<div id="'+n+'" class="'+e._defaults.classBoxCharacter+'">'+r+" <span>"+i+"</span></div>";t.after(s);var o=t.position.width;$("#"+n).css({"font-family":"Arial","font-size":"10px",width:o,margin:0,paddig:0,"text-align":"right"});e._methods.SetLimitCharacterUpD(t,i,$("#"+n+" > span"));$(document).unbind("keypress").on("keypress",t,function(){e._methods.SetLimitCharacterUpD(t,i,$("#"+n+" > span"))}).unbind("change").on("change",t,function(){e._methods.SetLimitCharacterUpD(t,i,$("#"+n+" > span"))})}},SetLimitCharacterUpD:function(e,t,n){var r=e.val();var i=r.length;var s;if(i>t){s=r.slice(0,t);e.val(s)}else{n.html(t-i)}},getPosition:function(e){if(e){var t=e.offset();var n=e.height();var r=e.width();t.height=n;t.width=r;t.topplus=n+t.top;t.leftplus=r+t.left;return t}return false},getField:function(e,t){$("[form="+e._settings.FormName+"]").each(function(n){var r=$(this);r.Id=r.attr("id");r.Name=r.attr("name");if(t){e._methods.ValidField(e,r)}else{e._methods.InitField(e,r)}})},getConf:function($Ob,field){var conf=eval($(field).data("conf"));if(conf&&conf[0].msg){$Ob._message.Erro.Required=conf[0].msg}return conf?conf[0]:0},SubmitClick:function(e){e._defaults.Success=true;e._methods.CleanMsg(e);e._methods.getField(e,true);if(e._defaults.Success){e._methods.Post()}},Post:function(){}};var pluginName="FullFormValidation",defaults={enctype:'enctype="multipart/form-data"',method:"post",action:'action="javascript:void(0)"',classBoxError:"plugin_boxError",classBoxCharacter:"plugin_boxCharacter",Success:true,character:{Active:true,Max:100,MaxText:"characters left: "}};Plugin.prototype.init=function(){$("#"+this._Id).attr({action:this._defaults.action,method:this._defaults.method,enctype:this._defaults.enctype});this._methods.getField(this);$("#Submeter[form="+this._settings.FormName+"]").prop("type","button").unbind("click").on("click",$.proxy(function(){this._methods.SubmitClick(this)},this))};$.fn.FullFormValidation=function(e){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new Plugin(this,e))}})}})(jQuery)